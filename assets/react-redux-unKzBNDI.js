import{r as u}from"./react-BaVpva5_.js";import{w as E}from"./use-sync-external-store-DUmCUKZm.js";function k(e){e()}function N(){let e=null,n=null;return{clear(){e=null,n=null},notify(){k(()=>{let t=e;for(;t;)t.callback(),t=t.next})},get(){const t=[];let s=e;for(;s;)t.push(s),s=s.next;return t},subscribe(t){let s=!0;const r=n={callback:t,next:null,prev:n};return r.prev?r.prev.next=r:e=r,function(){!s||e===null||(s=!1,r.next?r.next.prev=r.prev:n=r.prev,r.prev?r.prev.next=r.next:e=r.next)}}}}var g={notify(){},get:()=>[]};function L(e,n){let t,s=g,r=0,c=!1;function a(w){b();const R=s.subscribe(w);let y=!1;return()=>{y||(y=!0,R(),f())}}function l(){s.notify()}function o(){S.onStateChange&&S.onStateChange()}function d(){return c}function b(){r++,t||(t=e.subscribe(o),s=N())}function f(){r--,t&&r===0&&(t(),t=void 0,s.clear(),s=g)}function p(){c||(c=!0,b())}function x(){c&&(c=!1,f())}const S={addNestedSub:a,notifyNestedSubs:l,handleChangeWrapper:o,isSubscribed:d,trySubscribe:p,tryUnsubscribe:x,getListeners:()=>s};return S}var D=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",M=D(),T=()=>typeof navigator<"u"&&navigator.product==="ReactNative",U=T(),V=()=>M||U?u.useLayoutEffect:u.useEffect,O=V();function h(e,n){return e===n?e!==0||n!==0||1/e===1/n:e!==e&&n!==n}function J(e,n){if(h(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;const t=Object.keys(e),s=Object.keys(n);if(t.length!==s.length)return!1;for(let r=0;r<t.length;r++)if(!Object.prototype.hasOwnProperty.call(n,t[r])||!h(e[t[r]],n[t[r]]))return!1;return!0}var P=Symbol.for("react-redux-context"),H=typeof globalThis<"u"?globalThis:{};function I(){if(!u.createContext)return{};const e=H[P]??=new Map;let n=e.get(u.createContext);return n||(n=u.createContext(null),e.set(u.createContext,n)),n}var i=I();function q(e){const{children:n,context:t,serverState:s,store:r}=e,c=u.useMemo(()=>{const o=L(r);return{store:r,subscription:o,getServerState:s?()=>s:void 0}},[r,s]),a=u.useMemo(()=>r.getState(),[r]);O(()=>{const{subscription:o}=c;return o.onStateChange=o.notifyNestedSubs,o.trySubscribe(),a!==r.getState()&&o.notifyNestedSubs(),()=>{o.tryUnsubscribe(),o.onStateChange=void 0}},[c,a]);const l=t||i;return u.createElement(l.Provider,{value:c},n)}var Q=q;function v(e=i){return function(){return u.useContext(e)}}var C=v();function m(e=i){const n=e===i?C:v(e),t=()=>{const{store:s}=n();return s};return Object.assign(t,{withTypes:()=>t}),t}var W=m();function K(e=i){const n=e===i?W:m(e),t=()=>n().dispatch;return Object.assign(t,{withTypes:()=>t}),t}var X=K(),_=(e,n)=>e===n;function z(e=i){const n=e===i?C:v(e),t=(s,r={})=>{const{equalityFn:c=_}=typeof r=="function"?{equalityFn:r}:r,a=n(),{store:l,subscription:o,getServerState:d}=a;u.useRef(!0);const b=u.useCallback({[s.name](p){return s(p)}}[s.name],[s]),f=E.useSyncExternalStoreWithSelector(o.addNestedSub,l.getState,d||l.getState,b,c);return u.useDebugValue(f),f};return Object.assign(t,{withTypes:()=>t}),t}var Y=z();export{Q as P,Y as a,J as s,X as u};
